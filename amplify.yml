version: 1
frontend:
  phases:
    preBuild:
      commands:
        - export HUGO_VER=0.143.1   # any >= 0.141.0 is fine
        - curl -sSL -o hugo.tar.gz https://github.com/gohugoio/hugo/releases/download/v${HUGO_VER}/hugo_extended_${HUGO_VER}_Linux-64bit.tar.gz
        - tar -xzf hugo.tar.gz
        - chmod +x ./hugo
        - export PATH=$PWD:$PATH
        - ./hugo version
    build:
      commands:
        - ./hugo --gc --minify
  artifacts:
    baseDirectory: public
    files:
      - '**/*'
